{"/home/dev/test/unit/suite/Adview.test.ts":{"path":"/home/dev/test/unit/suite/Adview.test.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":15},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":32}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":56}},"4":{"start":{"line":6,"column":19},"end":{"line":6,"column":65}},"5":{"start":{"line":7,"column":0},"end":{"line":77,"column":3}},"6":{"start":{"line":8,"column":4},"end":{"line":48,"column":7}},"7":{"start":{"line":9,"column":23},"end":{"line":11,"column":10}},"8":{"start":{"line":12,"column":27},"end":{"line":16,"column":9}},"9":{"start":{"line":17,"column":26},"end":{"line":21,"column":9}},"10":{"start":{"line":22,"column":21},"end":{"line":26,"column":9}},"11":{"start":{"line":27,"column":23},"end":{"line":31,"column":9}},"12":{"start":{"line":32,"column":34},"end":{"line":32,"column":38}},"13":{"start":{"line":33,"column":23},"end":{"line":33,"column":75}},"14":{"start":{"line":34,"column":8},"end":{"line":34,"column":55}},"15":{"start":{"line":35,"column":8},"end":{"line":35,"column":60}},"16":{"start":{"line":36,"column":8},"end":{"line":36,"column":75}},"17":{"start":{"line":37,"column":8},"end":{"line":37,"column":87}},"18":{"start":{"line":38,"column":8},"end":{"line":38,"column":84}},"19":{"start":{"line":39,"column":8},"end":{"line":39,"column":69}},"20":{"start":{"line":40,"column":8},"end":{"line":40,"column":69}},"21":{"start":{"line":41,"column":8},"end":{"line":41,"column":79}},"22":{"start":{"line":42,"column":8},"end":{"line":42,"column":84}},"23":{"start":{"line":43,"column":8},"end":{"line":43,"column":94}},"24":{"start":{"line":44,"column":8},"end":{"line":44,"column":106}},"25":{"start":{"line":45,"column":8},"end":{"line":45,"column":109}},"26":{"start":{"line":46,"column":8},"end":{"line":46,"column":116}},"27":{"start":{"line":47,"column":8},"end":{"line":47,"column":20}},"28":{"start":{"line":49,"column":4},"end":{"line":76,"column":7}},"29":{"start":{"line":50,"column":23},"end":{"line":52,"column":10}},"30":{"start":{"line":53,"column":27},"end":{"line":57,"column":9}},"31":{"start":{"line":58,"column":26},"end":{"line":62,"column":9}},"32":{"start":{"line":63,"column":21},"end":{"line":67,"column":9}},"33":{"start":{"line":68,"column":23},"end":{"line":72,"column":9}},"34":{"start":{"line":73,"column":8},"end":{"line":75,"column":41}},"35":{"start":{"line":74,"column":12},"end":{"line":74,"column":65}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":32},"end":{"line":7,"column":33}},"loc":{"start":{"line":7,"column":44},"end":{"line":77,"column":1}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":77},"end":{"line":8,"column":78}},"loc":{"start":{"line":8,"column":89},"end":{"line":48,"column":5}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":49,"column":82},"end":{"line":49,"column":83}},"loc":{"start":{"line":49,"column":94},"end":{"line":76,"column":5}},"line":49},"3":{"name":"(anonymous_3)","decl":{"start":{"line":73,"column":27},"end":{"line":73,"column":28}},"loc":{"start":{"line":73,"column":33},"end":{"line":75,"column":9}},"line":73}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1},"f":{"0":1,"1":1,"2":1,"3":1},"b":{},"inputSourceMap":{"version":3,"file":"/home/dev/test/unit/suite/Adview.test.ts","sources":["/home/dev/test/unit/suite/Adview.test.ts"],"names":[],"mappings":"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","sourcesContent":["\nimport { expect } from 'chai';\nimport { describe } from 'mocha';\nimport { AdView } from '../../../src/business/AdView';\nimport { IAdvertRO } from '../../../src/model/Advertising/IAdvert';\nimport { IAdvertiserRO } from '../../../src/model/Advertising/IAdvertiser';\nimport { IPublisherRO } from '../../../src/model/Advertising/IPublisher';\nimport { IUserRO } from '../../../src/model/User/IUser';\nimport { ApiError } from '../../../src/utility/Error/ApiError';\n\n\ndescribe(\"AdView\", function () {\n\n  it(\"One ad view should debit publisher and user, and credit advertiser\", function () {\n    const adview = new AdView({\n      publisherPercentage: 0.75\n    });\n\n    const advertiser: IAdvertiserRO = {\n      advertiserId: 1,\n      name: 'Test advertiser',\n      balance: 100\n    };\n\n    const publisher: IPublisherRO = {\n      publisherId: 1,\n      name: 'Test publisher',\n      balance: 76.32\n    };\n\n    const user: IUserRO = {\n      userId: 1,\n      email: '',\n      balance: 1.45\n    }\n\n    const advert: IAdvertRO = {\n      advertId: 1,\n      advertiserId: 1,\n      price: 1.99\n    };\n\n    const adPublisherCredit = 1.49; // Manually calculated rounded down\n\n    const result = adview.transfer(\n      advert,\n      advertiser,\n      publisher, \n      user\n    );\n\n    expect(result).to.not.be.undefined;\n    expect(result.view).to.not.be.undefined;\n    expect(result.view.advertId).to.equal(advert.advertId);\n    expect(result.view.advertiserId).to.equal(advertiser.advertiserId);\n    expect(result.view.publisherId).to.equal(publisher.publisherId);\n    expect(result.view.userId).to.equal(user.userId);\n    expect(result.view.total).to.equal(advert.price);\n    expect(result.view.advertiserDebit).to.equal(advert.price);\n    expect(result.view.publisherCredit).to.equal(adPublisherCredit);\n    expect(result.view.userCredit).to.equal(advert.price - adPublisherCredit);\n    expect(result.updates.advertiser.balance).to.equal(advertiser.balance - advert.price);\n    expect(result.updates.publisher.balance).to.equal(publisher.balance + adPublisherCredit);\n    expect(result.updates.user.balance).to.equal(user.balance + (advert.price - adPublisherCredit));\n\n    return true;\n  });\n\n  it(\"Should throw an exception if the advertiser does not have enough credit\", function () {\n    const adview = new AdView({\n      publisherPercentage: 0.75\n    });\n\n    const advertiser: IAdvertiserRO = {\n      advertiserId: 1,\n      name: 'Test advertiser',\n      balance: 1\n    };\n\n    const publisher: IPublisherRO = {\n      publisherId: 1,\n      name: 'Test publisher',\n      balance: 76.32\n    };\n\n    const user: IUserRO = {\n      userId: 1,\n      email: '',\n      balance: 1.45\n    }\n\n    const advert: IAdvertRO = {\n      advertId: 1,\n      advertiserId: 1,\n      price: 1.99\n    };    \n\n    expect(() => {\n      adview.transfer(\n        advert,\n        advertiser,\n        publisher, \n        user\n      );\n    }).to.throw(ApiError); //.with.property('structured', 'advertiser/insufficient-credit');\n  })\n});\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ec2eaa548d308292c895e837cedffebb4741b0f4","contentHash":"adc99ce753d343fd995ed03dbca6a731ea901433da627237768f24af637a78a7"},"/home/dev/src/business/AdView.ts":{"path":"/home/dev/src/business/AdView.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":19},"end":{"line":4,"column":55}},"3":{"start":{"line":5,"column":20},"end":{"line":5,"column":57}},"4":{"start":{"line":11,"column":8},"end":{"line":11,"column":33}},"5":{"start":{"line":14,"column":34},"end":{"line":14,"column":63}},"6":{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},"7":{"start":{"line":16,"column":12},"end":{"line":16,"column":147}},"8":{"start":{"line":24,"column":32},"end":{"line":24,"column":102}},"9":{"start":{"line":26,"column":27},"end":{"line":26,"column":53}},"10":{"start":{"line":27,"column":23},"end":{"line":49,"column":9}},"11":{"start":{"line":50,"column":8},"end":{"line":50,"column":22}},"12":{"start":{"line":53,"column":0},"end":{"line":53,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":26},"end":{"line":12,"column":5}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":46},"end":{"line":51,"column":5}},"line":13}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},"type":"if","locations":[{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},{"start":{"line":15,"column":8},"end":{"line":17,"column":9}}],"line":15}},"s":{"0":1,"1":1,"2":1,"3":1,"4":2,"5":2,"6":2,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1},"f":{"0":2,"1":2},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"/home/dev/src/business/AdView.ts","sources":["/home/dev/src/business/AdView.ts"],"names":[],"mappings":";;;AAKA,wDAAqD;AACrD,0DAAuD;AAevD;;GAEG;AACH,MAAa,MAAM;IAEjB,YAAoB,QAAyB;QAAzB,aAAQ,GAAR,QAAQ,CAAiB;IAC7C,CAAC;IAED,QAAQ,CAAC,EAAW,EAAE,UAAyB,EAAE,SAAuB,EAAE,IAAa;QAErF,MAAM,iBAAiB,GAAG,UAAU,CAAC,OAAO,GAAG,EAAE,CAAC,KAAK,CAAC;QACxD,IAAI,iBAAiB,GAAG,CAAC,EAAE;YACzB,MAAM,IAAI,mBAAQ,CAAC,qBAAS,CAAC,UAAU,EAAE,gCAAgC,EAAE,mCAAmC,CAAC,CAAC;SACjH;QACD;;;;;WAKG;QACH,MAAM,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,mBAAmB,GAAG,GAAG,CAAC,GAAG,KAAK,CAAC;QAE/F,mDAAmD;QACnD,MAAM,UAAU,GAAG,EAAE,CAAC,KAAK,GAAG,eAAe,CAAC;QAE9C,MAAM,MAAM,GAAkB;YAC5B,OAAO,EAAE;gBACP,UAAU,EAAE;oBACV,OAAO,EAAE,iBAAiB;iBAC3B;gBACD,SAAS,EAAE;oBACT,OAAO,EAAE,SAAS,CAAC,OAAO,GAAG,eAAe;iBAC7C;gBACD,IAAI,EAAE;oBACJ,OAAO,EAAE,IAAI,CAAC,OAAO,GAAG,UAAU;iBACnC;aACF;YACD,IAAI,EAAE;gBACJ,QAAQ,EAAE,EAAE,CAAC,QAAQ;gBACrB,YAAY,EAAE,EAAE,CAAC,YAAY;gBAC7B,WAAW,EAAE,SAAS,CAAC,WAAW;gBAClC,MAAM,EAAE,IAAI,CAAC,MAAM;gBACnB,KAAK,EAAE,EAAE,CAAC,KAAK;gBACf,eAAe,EAAE,EAAE,CAAC,KAAK;gBACzB,eAAe,EAAE,eAAe;gBAChC,UAAU,EAAE,UAAU;aACvB;SACF,CAAA;QAED,OAAO,MAAM,CAAC;IAEhB,CAAC;CAGF;AAnDD,wBAmDC","sourcesContent":["import { IAdvert } from \"../model/Advertising/IAdvert\";\nimport { IAdvertViewCreate } from \"../model/Advertising/IAdvertView\";\nimport { IAdvertiserRO, IAdvertiserUpdate } from \"../model/Advertising/IAdvertiser\";\nimport { IPublisherRO, IPublisherUpdate } from \"../model/Advertising/IPublisher\";\nimport { IUserRO, IUserUpdate } from \"../model/User/IUser\";\nimport { ApiError } from \"../utility/Error/ApiError\";\nimport { ErrorCode } from \"../utility/Error/ErrorCode\";\n\nexport interface IAdViewResult {\n  updates: {\n    advertiser: IAdvertiserUpdate,\n    publisher: IPublisherUpdate,\n    user: IUserUpdate,\n  },\n  view: IAdvertViewCreate\n}\n\nexport interface IAdViewSettings {\n  publisherPercentage: number;\n}\n\n/** Contient la logique business pour la transfert de valeur entre-\n * les parties prenants d'une vue de publicité\n */\nexport class AdView {\n\n  constructor(private settings: IAdViewSettings) {\n  }\n  \n  transfer(ad: IAdvert, advertiser: IAdvertiserRO, publisher: IPublisherRO, user: IUserRO) : IAdViewResult { \n    \n    const advertiserBalance = advertiser.balance - ad.price;\n    if (advertiserBalance < 0) {\n      throw new ApiError(ErrorCode.BadRequest, 'advertiser/insufficient-credit', \"Not enough balance to show the ad\");\n    }\n    /** Ici on va forcer l'arrondie au 10ème de centime, vers le bas:\n     * 1.23 € * 0.75€ = 0.9225 €\n     * x 100 = 92.25\n     * floor(92.25) = 92\n     * 92 / 100 = 0.92 €\n     */\n    const publisherCredit = Math.floor(ad.price * this.settings.publisherPercentage * 100) / 100.0;\n\n    /** Et ici on va donner le reste à l'utilisateur */\n    const userCredit = ad.price - publisherCredit;\n\n    const result: IAdViewResult = {\n      updates: {\n        advertiser: {\n          balance: advertiserBalance\n        },\n        publisher: {\n          balance: publisher.balance + publisherCredit\n        },\n        user: {\n          balance: user.balance + userCredit\n        }\n      },\n      view: {\n        advertId: ad.advertId,\n        advertiserId: ad.advertiserId,\n        publisherId: publisher.publisherId,\n        userId: user.userId,\n        total: ad.price,\n        advertiserDebit: ad.price,\n        publisherCredit: publisherCredit,\n        userCredit: userCredit\n      }\n    }\n\n    return result;\n\n  }\n\n\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"de1539e382a64f8ac4ab3bd49af8c47c9398dc38","contentHash":"f60cbb4bb9da68e2f402df1f842d745aa180e6d5430eedcff3ae75954c6138ea"},"/home/dev/src/utility/Error/ApiError.ts":{"path":"/home/dev/src/utility/Error/ApiError.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":16}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":33}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":47}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":37}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":37}},"7":{"start":{"line":13,"column":8},"end":{"line":18,"column":10}},"8":{"start":{"line":21,"column":0},"end":{"line":21,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":67},"end":{"line":11,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":15},"end":{"line":19,"column":5}},"line":12}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":1},"f":{"0":1,"1":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/dev/src/utility/Error/ApiError.ts","sources":["/home/dev/src/utility/Error/ApiError.ts"],"names":[],"mappings":";;;AAKA,MAAa,QAAS,SAAQ,KAAK;IACjC,YAAmB,QAAmB,EAAS,eAAiC,EAAS,UAAkB,EAAS,UAAgB;QAClI,KAAK,EAAE,CAAA;QADU,aAAQ,GAAR,QAAQ,CAAW;QAAS,oBAAe,GAAf,eAAe,CAAkB;QAAS,eAAU,GAAV,UAAU,CAAQ;QAAS,eAAU,GAAV,UAAU,CAAM;IAEpI,CAAC;IAED,IAAI,IAAI;QACN,OAAO;YACL,IAAI,EAAE,IAAI,CAAC,QAAQ;YACnB,UAAU,EAAE,IAAI,CAAC,eAAe;YAChC,OAAO,EAAE,IAAI,CAAC,UAAU;YACxB,OAAO,EAAE,IAAI,CAAC,UAAU;SACzB,CAAA;IACH,CAAC;CACF;AAbD,4BAaC","sourcesContent":["import { ErrorCode } from './ErrorCode';\nimport { IApiError } from './IApiError';\nimport { StructuredErrors } from './StructuredErrors';\n\n\nexport class ApiError extends Error{\n  constructor(public httpCode: ErrorCode, public structuredError: StructuredErrors, public errMessage: string, public errDetails?: any) {\n    super()\n  }\n\n  get json(): IApiError {\n    return {\n      code: this.httpCode,\n      structured: this.structuredError,\n      message: this.errMessage,\n      details: this.errDetails\n    }\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d185ab26c64dab2955948f173d5f49775c7c2602","contentHash":"3cb4b9d7f93eb45f121fe9959724525eae7b99e33cfeaff87d03b104e5a1f9f3"},"/home/dev/src/utility/Error/ErrorCode.ts":{"path":"/home/dev/src/utility/Error/ErrorCode.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":5,"column":0},"end":{"line":12,"column":62}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":56}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":64}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":60}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":64}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":70}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":66}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":22},"end":{"line":12,"column":1}},"line":5}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":15},"end":{"line":12,"column":60}},"type":"binary-expr","locations":[{"start":{"line":12,"column":15},"end":{"line":12,"column":32}},{"start":{"line":12,"column":37},"end":{"line":12,"column":59}}],"line":12}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{"0":1},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"/home/dev/src/utility/Error/ErrorCode.ts","sources":["/home/dev/src/utility/Error/ErrorCode.ts"],"names":[],"mappings":";;;AACA,IAAY,SAOX;AAPD,WAAY,SAAS;IACnB,mDAAc,CAAA;IACd,2DAAkB,CAAA;IAClB,uDAAgB,CAAA;IAChB,2DAAkB,CAAA;IAClB,iEAAqB,CAAA;IACrB,6DAAmB,CAAA;AACrB,CAAC,EAPW,SAAS,GAAT,iBAAS,KAAT,iBAAS,QAOpB","sourcesContent":["\nexport enum ErrorCode {\n  NotFound = 404,\n  Unauthorized = 403,\n  BadRequest = 400,\n  TokenExpired = 410,\n  TooManyRequests = 429,\n  InternalError = 500\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4b745d585df19c58bd55fbb886f91b5c4bbebe15","contentHash":"7c4326906c04c1b6702b4c978e83c31c5bb76bbdd18866d5d7d1bb58ccbe3fa7"}}